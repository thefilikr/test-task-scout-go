# Сервис Цитат

Простой сервис или API для получения и управления цитатами. Поддерживает хранение данных в памяти или в базе данных SQLite.

## Описание

Этот проект предоставляет базовый сервис для работы с коллекцией цитат. Он позволяет получать цитаты по ID, случайные цитаты и цитаты по автору. Конфигурация осуществляется через переменные окружения, что позволяет легко переключаться между различными типами хранилищ данных.

## Особенности

*   Поддержка двух типов хранилищ данных:
    *   **In-memory:** Данные хранятся в оперативной памяти и теряются при перезапуске приложения. Удобно для разработки и тестирования.
    *   **SQLite:** Данные хранятся в файле базы данных SQLite и не теряются при перезапуске приложения.
*   Конфигурация через переменные окружения.
*   Предоставлены вспомогательные скрипты для взаимодействия с сервисом (получение цитат).

## Технологии

*   Go
*   SQLite

## Установка

Для сборки и запуска проекта вам понадобится установленный Go.

1.  Клонируйте репозиторий:
    ```bash
    git clone <ссылка на ваш репозиторий>
    cd <название_директории_проекта>
    ```
2.  Соберите проект с помощью Makefile:
    ```bash
    make build
    ```
    Это создаст исполняемый файл в корневой директории проекта.

## Конфигурация

Проект конфигурируется с помощью переменных окружения. Вы можете использовать файл `.env` для удобства. Скопируйте `.env.template` в `.env` и отредактируйте его.

```bash
cp .env.template .env
```
```dotenv
REPOSITORY_TYPE=sqlite
DATABASE_PATH=./my_quotes.db
PORT=8080
```

**REPOSITORY_TYPE:** Определяет, какой тип хранилища цитат использовать.

Допустимые значения: 'inmemory' (хранит цитаты в памяти, данные теряются при перезапуске)
или 'sqlite' (хранит цитаты в файле SQLite).

Значение по умолчанию: inmemory
Пример: REPOSITORY_TYPE=sqlite


**DATABASE_PATH:** Путь к файлу базы данных SQLite.

Используется только если REPOSITORY_TYPE установлен в 'sqlite'.

Если не указан при REPOSITORY_TYPE=sqlite, используется путь по умолчанию './quotes.db'.

**PORT:** Порт, на котором будет прослушивать HTTP сервер.
Значение по умолчанию: 8000


## Использование

1.  Запустите сервис. Убедитесь, что переменные окружения установлены (например, через файл `.env`):
    ```bash
    make run
    ```

2.  Используйте предоставленные скрипты в директории `scripts/` для взаимодействия с сервисом. Убедитесь, что сервис запущен.

    *   Получить цитату по ID:
        ```bash
        ./scripts/get_by_id.sh <id>
        ```
    *   Получить случайную цитату:
        ```bash
        ./scripts/get_random_quote.sh
        ```
    *   Получить цитаты по автору:
        ```bash
        ./scripts/get_quotes_by_author.sh "<имя автора>"
        ```

    *Примечание: Возможно, вам потребуется сделать скрипты исполняемыми: `chmod +x scripts/*.sh`*

## Структура Проекта

Проект имеет следующую структуру директорий и файлов:

*   `main.go`: Точка входа в приложение. Инициализирует конфигурацию, репозиторий, сервис и роутер, затем запускает HTTP-сервер.
*   `go.mod` и `go.sum`: Файлы Go Modules, управляющие зависимостями проекта.
*   `Makefile`: Содержит команды для сборки (`build`) и запуска (`run`) проекта.
*   `.env.template`: Шаблон файла для настройки переменных окружения (`.env`).
*   `scripts/`: Директория, содержащая вспомогательные скрипты для взаимодействия с запущенным сервисом (например, для получения цитат).
*   `internal/`: Директория для кода проекта 
    *   `internal/config/`: Содержит логику для загрузки и парсинга конфигурации приложения из переменных окружения.
    *   `internal/domain/`: Содержит определения основных структур данных (моделей предметной области), таких как `Quote`.
    *   `internal/repository/`: Содержит интерфейс `QuoteRepository` и, предположительно, реализации для различных типов хранилищ данных (in-memory, sqlite). Отвечает за взаимодействие с хранилищем данных.
    *   `internal/service/`: Содержит интерфейс `QuoteService` и его реализацию. Реализует бизнес-логику приложения, используя репозиторий.
    *   `internal/router/`: Содержит структуру `Router` и связанные с ней HTTP-обработчики (`handlers`). Отвечает за маршрутизацию входящих HTTP-запросов и вызов соответствующих методов сервиса.
